import{j as l}from"./index-XnMTmJ1N.js";import{s as c}from"./useUsuario-DUZRc8QX.js";import{f as d,p as f}from"./Navbar-Brd59B00.js";function g({texto:n}){return n?l.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-2 rounded shadow-md z-50",children:n}):null}function _(n,i,s=[]){if(i==="movie")return"Película";let o=[];n.genres&&(o=n.genres.map(e=>typeof e=="object"?(e.name||"").toLowerCase():(e||"").toLowerCase())),Array.isArray(s)&&(o=o.concat(s.map(e=>e.toLowerCase())));const r=n.origin_country||[],a=n.original_language||"";return o.some(e=>e.includes("anime")||e.includes("animación")||e.includes("animation")||e.includes("アニメ"))||a==="ja"||r.includes("JP")?"Anime":o.some(e=>e.includes("drama"))&&(r.includes("KR")||a==="ko")?"K-Drama":o.some(e=>e.includes("drama"))&&r.some(e=>["JP","CN","TH","TW"].includes(e))||r.some(e=>["JP","CN","TH","TW"].includes(e))?"Dorama":o.some(e=>e.includes("anime"))?"Anime":(o.some(e=>e.includes("drama")),"Serie")}async function y(n,i,s="es-ES"){const o=await d(i,n,s),r=f(o,i);if(!r)return null;const{error:a}=await c.from("contenido").upsert([r]);return a?(console.error("Error guardando contenido en Supabase:",a),null):r}async function h(n,i="es-ES"){const s=await d("tv",n,i);if(!(!s||!s.seasons))for(const o of s.seasons){if(typeof o.season_number!="number"||o.season_number===0)continue;const r=`https://api.themoviedb.org/3/tv/${n}/season/${o.season_number}?api_key=b0d797f053110a25f57317b8e7ba3b06&language=${i}`,a=await fetch(r);if(!a.ok)continue;const e=await a.json();if(Array.isArray(e.episodes)){const u=e.episodes.map(t=>({contenido_id:n,temporada:o.season_number,episodio:t.episode_number,nombre:t.name,fecha_emision:t.air_date,imagen:t.still_path?`https://image.tmdb.org/t/p/w500${t.still_path}`:null,especial:t.special||!1,duracion:t.runtime||45})),{error:m}=await c.from("episodios").upsert(u,{onConflict:["contenido_id","temporada","episodio"]});m&&console.error(`Error guardando episodios T${o.season_number}:`,m)}await new Promise(u=>setTimeout(u,300))}}export{g as M,h as a,_ as d,y as g};
