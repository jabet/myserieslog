import{r,j as e}from"./index-B5isPGjJ.js";import{s}from"./useUsuario-ByIR5A8c.js";import{N as v}from"./Navbar-CKa8b93H.js";function _(){const[i,b]=r.useState(null),[l,c]=r.useState("es"),[d,m]=r.useState(""),[u,p]=r.useState(""),[n,x]=r.useState(!1),[h,f]=r.useState(!1);r.useEffect(()=>{s.auth.getUser().then(async({data:{user:t}})=>{if(!t)return;b(t);const{data:o}=await s.from("preferencias_usuario").select("idioma_preferido").eq("user_id",t.id).single();o!=null&&o.idioma_preferido&&c(o.idioma_preferido);const{data:a}=await s.from("usuarios").select("nick, avatar, compartir_catalogo").eq("id",t.id).maybeSingle();a!=null&&a.nick&&m(a.nick),a!=null&&a.avatar&&p(a.avatar),typeof(a==null?void 0:a.compartir_catalogo)=="boolean"&&x(a.compartir_catalogo)})},[]);const g=async()=>{i&&(await s.from("preferencias_usuario").upsert({user_id:i.id,idioma_preferido:l},{onConflict:"user_id"}),await s.from("usuarios").upsert({id:i.id,nick:d,avatar:u,compartir_catalogo:n},{onConflict:"id"}),f(!0),setTimeout(()=>f(!1),2e3))};return e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("main",{className:"pt-24 max-w-xl mx-auto px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Preferencias de usuario"}),e.jsx("label",{htmlFor:"nick",className:"block text-sm font-medium mb-1",children:"Tu apodo (nick):"}),e.jsx("input",{id:"nick",type:"text",value:d,onChange:t=>m(t.target.value),className:"w-full border px-3 py-2 rounded mb-4",placeholder:"Escribe tu nombre visible..."}),e.jsx("label",{htmlFor:"avatar",className:"block text-sm font-medium mb-1",children:"URL de tu avatar (imagen):"}),e.jsx("input",{id:"avatar",type:"text",value:u,onChange:t=>p(t.target.value),className:"w-full border px-3 py-2 rounded mb-4",placeholder:"https://..."}),e.jsx("label",{htmlFor:"idioma",className:"block text-sm font-medium mb-1",children:"Idioma preferido:"}),e.jsxs("select",{id:"idioma",value:l,onChange:t=>c(t.target.value),className:"w-full border px-3 py-2 rounded mb-6",children:[e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"en",children:"Inglés"}),e.jsx("option",{value:"fr",children:"Francés"}),e.jsx("option",{value:"de",children:"Alemán"})]}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{id:"compartir",type:"checkbox",checked:n,onChange:()=>x(!n),className:"h-5 w-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("label",{htmlFor:"compartir",className:"ml-2 text-sm",children:"Compartir mi catálogo con amigos"})]}),e.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cambios"}),h&&e.jsx("p",{className:"mt-3 text-green-600 text-sm",children:"¡Preferencias guardadas!"})]})]})}export{_ as default};
