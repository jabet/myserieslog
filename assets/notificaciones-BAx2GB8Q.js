import{s as $}from"./useUsuario-DUZRc8QX.js";const i={COLECCION:"coleccion",VISUALIZACION:"visualizacion",RACHA:"racha",GENEROS:"generos",TIEMPO:"tiempo",ESPECIALES:"especiales"},g=[{id:"primera_serie",nombre:"Primer Paso",descripcion:"Añade tu primera serie al catálogo",emoji:"🎬",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.total)>=1},color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"primera_pelicula",nombre:"Cinéfilo Novato",descripcion:"Añade tu primera película al catálogo",emoji:"🎭",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.peliculas)==null?void 0:e.total)>=1},color:"bg-purple-50 text-purple-800 border-purple-200"},{id:"coleccionista_basico",nombre:"Coleccionista",descripcion:"Reúne 10 series en tu catálogo",emoji:"📚",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.total)>=10},color:"bg-green-50 text-green-800 border-green-200"},{id:"cinefilo_basico",nombre:"Amante del Cine",descripcion:"Reúne 25 películas en tu catálogo",emoji:"🍿",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.peliculas)==null?void 0:e.total)>=25},color:"bg-red-50 text-red-800 border-red-200"},{id:"coleccionista_avanzado",nombre:"Bibliógrafo",descripcion:"Reúne 50 series en tu catálogo",emoji:"📖",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.total)>=50},color:"bg-indigo-50 text-indigo-800 border-indigo-200"},{id:"cinefilo_avanzado",nombre:"Crítico de Cine",descripcion:"Reúne 100 películas en tu catálogo",emoji:"🎞️",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.peliculas)==null?void 0:e.total)>=100},color:"bg-yellow-50 text-yellow-800 border-yellow-200"},{id:"coleccionista_experto",nombre:"Curador Maestro",descripcion:"Reúne 100 series en tu catálogo",emoji:"🏛️",categoria:i.COLECCION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.total)>=100},color:"bg-purple-50 text-purple-800 border-purple-200"},{id:"archivista",nombre:"Archivista Supremo",descripcion:"Reúne 200 títulos en total (series + películas)",emoji:"🗃️",categoria:i.COLECCION,condicion:o=>{var e,r;return(((e=o.series)==null?void 0:e.total)||0)+(((r=o.peliculas)==null?void 0:r.total)||0)>=200},color:"bg-gray-50 text-gray-800 border-gray-200"},{id:"primer_episodio",nombre:"Espectador Novato",descripcion:"Ve tu primer episodio",emoji:"👀",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.vistos)>=1},color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"primera_pelicula_vista",nombre:"Primera Función",descripcion:"Ve tu primera película completa",emoji:"🎪",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.peliculas)==null?void 0:e.vistas)>=1},color:"bg-pink-50 text-pink-800 border-pink-200"},{id:"maraton_basico",nombre:"Maratonista",descripcion:"Ve 100 episodios",emoji:"🏃‍♂️",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.vistos)>=100},color:"bg-orange-50 text-orange-800 border-orange-200"},{id:"cinefilo_activo",nombre:"Cinéfilo Activo",descripcion:"Ve 50 películas",emoji:"🎬",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.peliculas)==null?void 0:e.vistas)>=50},color:"bg-purple-50 text-purple-800 border-purple-200"},{id:"maraton_avanzado",nombre:"Devorador de Series",descripcion:"Ve 500 episodios",emoji:"🍿",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.vistos)>=500},color:"bg-red-50 text-red-800 border-red-200"},{id:"maraton_extremo",nombre:"Adicto a las Series",descripcion:"Ve 1000 episodios",emoji:"🔥",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.vistos)>=1e3},color:"bg-red-50 text-red-900 border-red-300"},{id:"completista",nombre:"Finalizador",descripcion:"Termina 5 series completas",emoji:"✅",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.vistas)>=5},color:"bg-green-50 text-green-800 border-green-200"},{id:"completista_avanzado",nombre:"Terminator",descripcion:"Termina 25 series completas",emoji:"🎯",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.vistas)>=25},color:"bg-teal-50 text-teal-800 border-teal-200"},{id:"completista_maestro",nombre:"Maestro Completista",descripcion:"Termina 50 series completas",emoji:"👑",categoria:i.VISUALIZACION,condicion:o=>{var e;return((e=o.series)==null?void 0:e.vistas)>=50},color:"bg-yellow-50 text-yellow-800 border-yellow-200"},{id:"primera_racha",nombre:"Primer Día",descripcion:"Ve contenido un día",emoji:"📅",categoria:i.RACHA,condicion:o=>{var e;return((e=o.racha)==null?void 0:e.mejor)>=1},color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"racha_semanal",nombre:"En Llamas",descripcion:"Mantén una racha de 7 días",emoji:"🔥",categoria:i.RACHA,condicion:o=>{var e;return((e=o.racha)==null?void 0:e.mejor)>=7},color:"bg-red-50 text-red-800 border-red-200"},{id:"racha_quincenal",nombre:"Disciplinado",descripcion:"Mantén una racha de 15 días",emoji:"💪",categoria:i.RACHA,condicion:o=>{var e;return((e=o.racha)==null?void 0:e.mejor)>=15},color:"bg-orange-50 text-orange-800 border-orange-200"},{id:"racha_mensual",nombre:"Constancia",descripcion:"Mantén una racha de 30 días",emoji:"🏆",categoria:i.RACHA,condicion:o=>{var e;return((e=o.racha)==null?void 0:e.mejor)>=30},color:"bg-green-50 text-green-800 border-green-200"},{id:"racha_bimestral",nombre:"Perseverante",descripcion:"Mantén una racha de 60 días",emoji:"💎",categoria:i.RACHA,condicion:o=>{var e;return((e=o.racha)==null?void 0:e.mejor)>=60},color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"racha_legendaria",nombre:"Leyenda",descripcion:"Mantén una racha de 100 días",emoji:"🌟",categoria:i.RACHA,condicion:o=>{var e;return((e=o.racha)==null?void 0:e.mejor)>=100},color:"bg-yellow-50 text-yellow-800 border-yellow-200"},{id:"tiempo_hora",nombre:"Primera Hora",descripcion:"Acumula 1 hora de contenido visto",emoji:"⏰",categoria:i.TIEMPO,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.tiempoTotal)>=60},color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"tiempo_dia",nombre:"Día Completo",descripcion:"Acumula 24 horas de contenido visto",emoji:"📺",categoria:i.TIEMPO,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.tiempoTotal)>=1440},color:"bg-purple-50 text-purple-800 border-purple-200"},{id:"tiempo_semana",nombre:"Semana de Series",descripcion:"Acumula 168 horas de contenido visto",emoji:"🗓️",categoria:i.TIEMPO,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.tiempoTotal)>=10080},color:"bg-green-50 text-green-800 border-green-200"},{id:"tiempo_mes",nombre:"Mes de Maratón",descripcion:"Acumula 720 horas de contenido visto",emoji:"📅",categoria:i.TIEMPO,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.tiempoTotal)>=43200},color:"bg-yellow-50 text-yellow-800 border-yellow-200"},{id:"tiempo_año",nombre:"Año de Entretenimiento",descripcion:"Acumula 8760 horas de contenido visto",emoji:"🎊",categoria:i.TIEMPO,condicion:o=>{var e;return((e=o.episodios)==null?void 0:e.tiempoTotal)>=525600},color:"bg-red-50 text-red-800 border-red-200"},{id:"primer_genero",nombre:"Primer Gusto",descripcion:"Ve contenido de tu primer género",emoji:"🎭",categoria:i.GENEROS,condicion:o=>{var e;return((e=o.generosFavoritos)==null?void 0:e.length)>=1},color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"explorador_generos",nombre:"Explorador",descripcion:"Ve contenido de 5 géneros diferentes",emoji:"🧭",categoria:i.GENEROS,condicion:o=>{var e;return((e=o.generosFavoritos)==null?void 0:e.length)>=5},color:"bg-teal-50 text-teal-800 border-teal-200"},{id:"conocedor_generos",nombre:"Conocedor",descripcion:"Ve contenido de 10 géneros diferentes",emoji:"🎨",categoria:i.GENEROS,condicion:o=>{var e;return((e=o.generosFavoritos)==null?void 0:e.length)>=10},color:"bg-indigo-50 text-indigo-800 border-indigo-200"},{id:"experto_generos",nombre:"Experto en Diversidad",descripcion:"Ve contenido de 15 géneros diferentes",emoji:"🌈",categoria:i.GENEROS,condicion:o=>{var e;return((e=o.generosFavoritos)==null?void 0:e.length)>=15},color:"bg-purple-50 text-purple-800 border-purple-200"},{id:"madrugador",nombre:"Madrugador",descripcion:"Añade contenido en enero (Año nuevo, vida nueva)",emoji:"🌅",categoria:i.ESPECIALES,condicion:o=>new Date().getMonth()===0&&(o.contenidoNuevoEsteMes||0)>0,color:"bg-cyan-50 text-cyan-800 border-cyan-200"},{id:"activo_mes",nombre:"Mes Activo",descripcion:"Añade 10 títulos en un solo mes",emoji:"💫",categoria:i.ESPECIALES,condicion:o=>(o.contenidoNuevoEsteMes||0)>=10,color:"bg-pink-50 text-pink-800 border-pink-200"},{id:"terminator_saga",nombre:"Terminator",descripcion:"Ve al menos 4 películas de la saga Terminator",emoji:"🤖",categoria:i.ESPECIALES,condicion:o=>!o.peliculasVistas||!Array.isArray(o.peliculasVistas)?!1:o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return a.includes("terminator")||n.includes("terminator")}).length>=4,color:"bg-red-50 text-red-800 border-red-200"},{id:"veterano",nombre:"Veterano",descripcion:"Lleva un año usando el catalogador",emoji:"🎖️",categoria:i.ESPECIALES,condicion:o=>{const e=new Date().getFullYear();return o.añoActividad&&e-o.añoActividad>=1},color:"bg-gray-50 text-gray-800 border-gray-200"},{id:"marvel_fan",nombre:"Superhéroe",descripcion:"Ve 10 películas del MCU",emoji:"🦸‍♂️",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas)return!1;const e=["iron man","avengers","captain america","thor","spider-man","black widow","doctor strange","guardians","ant-man","captain marvel","black panther","hulk","hawkeye"];return o.peliculasVistas.filter(a=>{const n=(a.nombre||"").toLowerCase(),t=(a.nombre_original||"").toLowerCase();return e.some(d=>n.includes(d)||t.includes(d))}).length>=10},color:"bg-red-50 text-red-800 border-red-200"},{id:"star_wars_fan",nombre:"Jedi Master",descripcion:"Ve 6 películas de Star Wars",emoji:"⚔️",categoria:i.ESPECIALES,condicion:o=>o.peliculasVistas?o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return a.includes("star wars")||n.includes("star wars")}).length>=6:!1,color:"bg-yellow-50 text-yellow-800 border-yellow-200"},{id:"trekkie",nombre:"Trekkie",descripcion:"Ve 6 películas de Star Trek",emoji:"🖖",categoria:i.ESPECIALES,condicion:o=>o.peliculasVistas?[...o.peliculasVistas||[],...o.seriesVistas||[]].filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return a.includes("star trek")||n.includes("star trek")}).length>=6:!1,color:"bg-blue-50 text-blue-800 border-blue-200"},{id:"fantastic_beasts_fan",nombre:"Magizoólogo",descripcion:"Ve 3 películas de Animales Fantásticos",emoji:"🦄",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas||!Array.isArray(o.peliculasVistas))return 0;const e=["animales fantásticos","fantastic beasts"];return o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return e.some(t=>a.includes(t)||n.includes(t))}).length},color:"bg-green-50 text-green-800 border-green-200"},{id:"harry_potter_fan",nombre:"Mago de Hogwarts",descripcion:"Ve 7 películas de Harry Potter",emoji:"🧙‍♂️",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas||!Array.isArray(o.peliculasVistas))return 0;const e=["harry potter","la piedra filosofal","la cámara secreta","el prisionero de azkaban","el cáliz de fuego","la orden del fénix","el misterio del príncipe","las reliquias de la muerte"];return o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return e.some(t=>a.includes(t)||n.includes(t))}).length},color:"bg-green-50 text-green-800 border-green-200"},{id:"lotr_fan",nombre:"El portador del Anillo",descripcion:"Ve 3 películas de El Señor de los Anillos",emoji:"💍",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas||!Array.isArray(o.peliculasVistas))return 0;const e=["el señor de los anillos","the lord of the rings","lotr"];return o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return e.some(t=>a.includes(t)||n.includes(t))}).length},color:"bg-green-50 text-green-800 border-green-200"},{id:"flash_fan",nombre:"Velocista",descripcion:"Ve 3 películas o series de Flash",emoji:"⚡",categoria:i.ESPECIALES,condicion:o=>{if((!o.peliculasVistas||!Array.isArray(o.peliculasVistas))&&(!o.seriesVistas||!Array.isArray(o.seriesVistas)))return 0;const e=[...o.peliculasVistas||[],...o.seriesVistas||[]],r=["flash","the flash"];return e.filter(a=>{const n=(a.nombre||"").toLowerCase(),t=(a.nombre_original||"").toLowerCase();return r.some(d=>n.includes(d)||t.includes(d))}).length},color:"bg-green-50 text-green-800 border-green-200"},{id:"antman_fan",nombre:"Ant-Man Fan",descripcion:"Ve 2 películas de Ant-Man",emoji:"🐜",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas||!Array.isArray(o.peliculasVistas))return 0;const e=["ant-man","ant man","antman"];return o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return e.some(t=>a.includes(t)||n.includes(t))}).length},color:"bg-green-50 text-green-800 border-green-200"},{id:"mutante",nombre:"Mutante",descripcion:"Ve 5 películas o series de X-Men",emoji:"🧬",categoria:i.ESPECIALES,condicion:o=>{const e=o.peliculasVistas||[],r=o.seriesVistas||[],a=[...e,...r],n=["x-men","wolverine","logan","new mutants","deadpool"];return a.filter(t=>{const d=(t.nombre||"").toLowerCase(),p=(t.nombre_original||"").toLowerCase();return n.some(b=>d.includes(b)||p.includes(b))}).length>=5},color:"bg-green-50 text-green-800 border-green-200"},{id:"hobbit_fan",nombre:"Aventurero de la Comarca",descripcion:"Ve las 3 películas de El Hobbit",emoji:"🧙",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas||!Array.isArray(o.peliculasVistas))return 0;const e=["el hobbit","the hobbit"];return o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return e.some(t=>a.includes(t)||n.includes(t))}).length>=3},color:"bg-yellow-50 text-yellow-800 border-yellow-200"},{id:"spiderman_fan",nombre:"Amigable Vecino",descripcion:"Ve al menos 3 películas de Spider-Man",emoji:"🕷️",categoria:i.ESPECIALES,condicion:o=>{if(!o.peliculasVistas||!Array.isArray(o.peliculasVistas))return 0;const e=["spider-man","spiderman","el hombre araña"];return o.peliculasVistas.filter(r=>{const a=(r.nombre||"").toLowerCase(),n=(r.nombre_original||"").toLowerCase();return e.some(t=>a.includes(t)||n.includes(t))}).length>=3},color:"bg-red-50 text-red-800 border-red-200"},{id:"got_fan",nombre:"El Trono es Mío",descripcion:"Ve las 8 temporadas de Juego de Tronos",emoji:"🐉",categoria:i.ESPECIALES,condicion:o=>{if(!o.seriesVistas||!Array.isArray(o.seriesVistas))return 0;const e=["juego de tronos","game of thrones"],r=o.seriesVistas.find(a=>{const n=(a.nombre||"").toLowerCase(),t=(a.nombre_original||"").toLowerCase();return e.some(d=>n.includes(d)||t.includes(d))});return r&&(r.temporadas_vistas>=8||r.completa===!0)},color:"bg-gray-50 text-gray-800 border-gray-300"}];function v(o){return o?g.filter(e=>{try{return e.condicion(o)}catch(r){return console.error(`Error evaluando logro ${e.id}:`,r),!1}}):[]}function B(o){if(!o)return[];const e=new Set(v(o).map(r=>r.id));return g.filter(r=>!e.has(r.id)).map(r=>{const a=W(r,o);return{...r,progreso:a}}).filter(r=>r.progreso>0).sort((r,a)=>a.progreso-r.progreso).slice(0,8)}function W(o,e){var n,t,d,p,b,C,A,f,_,h,j,V,E,L,S,I,O,x,w,y,M,P,T,N,R,F,k,z,H,G,U,q,D;const a={primera_serie:{actual:((n=e.series)==null?void 0:n.total)||0,objetivo:1},primera_pelicula:{actual:((t=e.peliculas)==null?void 0:t.total)||0,objetivo:1},coleccionista_basico:{actual:((d=e.series)==null?void 0:d.total)||0,objetivo:10},cinefilo_basico:{actual:((p=e.peliculas)==null?void 0:p.total)||0,objetivo:25},coleccionista_avanzado:{actual:((b=e.series)==null?void 0:b.total)||0,objetivo:50},cinefilo_avanzado:{actual:((C=e.peliculas)==null?void 0:C.total)||0,objetivo:100},coleccionista_experto:{actual:((A=e.series)==null?void 0:A.total)||0,objetivo:100},archivista:{actual:(((f=e.series)==null?void 0:f.total)||0)+(((_=e.peliculas)==null?void 0:_.total)||0),objetivo:200},primer_episodio:{actual:((h=e.episodios)==null?void 0:h.vistos)||0,objetivo:1},primera_pelicula_vista:{actual:((j=e.peliculas)==null?void 0:j.vistas)||0,objetivo:1},maraton_basico:{actual:((V=e.episodios)==null?void 0:V.vistos)||0,objetivo:100},cinefilo_activo:{actual:((E=e.peliculas)==null?void 0:E.vistas)||0,objetivo:50},maraton_avanzado:{actual:((L=e.episodios)==null?void 0:L.vistos)||0,objetivo:500},maraton_extremo:{actual:((S=e.episodios)==null?void 0:S.vistos)||0,objetivo:1e3},completista:{actual:((I=e.series)==null?void 0:I.vistas)||0,objetivo:5},completista_avanzado:{actual:((O=e.series)==null?void 0:O.vistas)||0,objetivo:25},completista_maestro:{actual:((x=e.series)==null?void 0:x.vistas)||0,objetivo:50},primera_racha:{actual:((w=e.racha)==null?void 0:w.mejor)||0,objetivo:1},racha_semanal:{actual:((y=e.racha)==null?void 0:y.mejor)||0,objetivo:7},racha_quincenal:{actual:((M=e.racha)==null?void 0:M.mejor)||0,objetivo:15},racha_mensual:{actual:((P=e.racha)==null?void 0:P.mejor)||0,objetivo:30},racha_bimestral:{actual:((T=e.racha)==null?void 0:T.mejor)||0,objetivo:60},racha_legendaria:{actual:((N=e.racha)==null?void 0:N.mejor)||0,objetivo:100},tiempo_hora:{actual:((R=e.episodios)==null?void 0:R.tiempoTotal)||0,objetivo:60},tiempo_dia:{actual:((F=e.episodios)==null?void 0:F.tiempoTotal)||0,objetivo:1440},tiempo_semana:{actual:((k=e.episodios)==null?void 0:k.tiempoTotal)||0,objetivo:10080},tiempo_mes:{actual:((z=e.episodios)==null?void 0:z.tiempoTotal)||0,objetivo:43200},tiempo_año:{actual:((H=e.episodios)==null?void 0:H.tiempoTotal)||0,objetivo:525600},primer_genero:{actual:((G=e.generosFavoritos)==null?void 0:G.length)||0,objetivo:1},explorador_generos:{actual:((U=e.generosFavoritos)==null?void 0:U.length)||0,objetivo:5},conocedor_generos:{actual:((q=e.generosFavoritos)==null?void 0:q.length)||0,objetivo:10},experto_generos:{actual:((D=e.generosFavoritos)==null?void 0:D.length)||0,objetivo:15},activo_mes:{actual:e.contenidoNuevoEsteMes||0,objetivo:10},terminator_saga:{actual:!e.peliculasVistas||!Array.isArray(e.peliculasVistas)?0:e.peliculasVistas.filter(s=>{const c=(s.nombre||"").toLowerCase(),l=(s.nombre_original||"").toLowerCase();return c.includes("terminator")||l.includes("terminator")}).length,objetivo:4},marvel_fan:{actual:(()=>{if(!e.peliculasVistas||!Array.isArray(e.peliculasVistas))return 0;const s=["iron man","avengers","captain america","thor","spider-man","black widow","doctor strange","guardians","ant-man","captain marvel","black panther","hulk","hawkeye"];return e.peliculasVistas.filter(c=>{const l=(c.nombre||"").toLowerCase(),m=(c.nombre_original||"").toLowerCase();return s.some(u=>l.includes(u)||m.includes(u))}).length})(),objetivo:10},star_wars_fan:{actual:!e.peliculasVistas||!Array.isArray(e.peliculasVistas)?0:e.peliculasVistas.filter(s=>{const c=(s.nombre||"").toLowerCase(),l=(s.nombre_original||"").toLowerCase();return c.includes("star wars")||l.includes("star wars")}).length,objetivo:6},trekkie:{actual:!e.peliculasVistas||!Array.isArray(e.peliculasVistas)?0:e.peliculasVistas.filter(s=>{const c=(s.nombre||"").toLowerCase(),l=(s.nombre_original||"").toLowerCase();return c.includes("star trek")||l.includes("star trek")}).length,objetivo:6},fantastic_beasts_fan:{actual:(()=>{if(!e.peliculasVistas||!Array.isArray(e.peliculasVistas))return 0;const s=["animales fantásticos","fantastic beasts"];return e.peliculasVistas.filter(c=>{const l=(c.nombre||"").toLowerCase(),m=(c.nombre_original||"").toLowerCase();return s.some(u=>l.includes(u)||m.includes(u))}).length})(),objetivo:3},harry_potter_fan:{actual:(()=>{if(!e.peliculasVistas||!Array.isArray(e.peliculasVistas))return 0;const s=["harry potter","la piedra filosofal","la cámara secreta","el prisionero de azkaban","el cáliz de fuego","la orden del fénix","el misterio del príncipe","las reliquias de la muerte"];return e.peliculasVistas.filter(c=>{const l=(c.nombre||"").toLowerCase(),m=(c.nombre_original||"").toLowerCase();return s.some(u=>l.includes(u)||m.includes(u))}).length})(),objetivo:7},got_fan:{actual:(()=>{if(!e.seriesVistas||!Array.isArray(e.seriesVistas))return 0;const s=["juego de tronos","game of thrones"],c=e.seriesVistas.find(l=>{const m=(l.nombre||"").toLowerCase(),u=(l.nombre_original||"").toLowerCase();return s.some(Z=>m.includes(Z)||u.includes(Z))});return c&&(c.temporadas_vistas>=8||c.completa===!0)})(),objetivo:8}}[o.id];return a?Math.min(100,Math.round(a.actual/a.objetivo*100)):0}function J(o){return Array.isArray(o)?o.reduce((e,r)=>{const a=r.categoria;return e[a]||(e[a]=[]),e[a].push(r),e},{}):{}}function Y(o){const e=v(o),r=B(o);return{total:g.length,desbloqueados:e.length,porcentaje:Math.round(e.length/g.length*100),proximos:r.length,porCategoria:J(e)}}function K(o,e){if(!o||!e)return[];const r=new Set(v(o).map(n=>n.id));return v(e).filter(n=>!r.has(n.id))}async function Q(o,e){await $.from("notificaciones_usuario").insert([{user_id:o,titulo:"¡Nuevo logro desbloqueado!",mensaje:`${e.emoji} ${e.nombre}: ${e.descripcion}`,url:"/perfil#logros",imagen:null}])}export{B as a,Y as b,v as c,Q as n,K as o};
